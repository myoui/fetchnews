(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{109:function(e,t){},111:function(e,t){},120:function(e,t){},122:function(e,t){},155:function(e,t){},156:function(e,t){},158:function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=158},162:function(e,t,n){},165:function(e,t,n){"use strict";n.r(t);var a=n(0),s=n.n(a),r=n(71),l=n.n(r),c=n(167),o=(n(77),n(16)),i=n(17),u=n(19),m=n(18),p=n(20),h=n(170),d=n(169),E=n(168),b=n(9),f=n(30),g=n(166),v=function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{onClick:function(){return window.scrollTo({top:0,behavior:"smooth"})}},s.a.createElement(g.a,{to:this.props.link},s.a.createElement("div",{className:"selector"},this.props.name)))}}]),t}(a.Component),w=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={mobile:!1},n}return Object(p.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.setState({mobile:f.isMobile.isMobile()})}},{key:"render",value:function(){return this.state.mobile?s.a.createElement("div",{className:"navBarMob"},s.a.createElement(b.Row,null,s.a.createElement(b.Column,null,s.a.createElement(v,{link:"usnews",name:"Top US News"})),s.a.createElement(b.Column,null,s.a.createElement(v,{link:"cnn",name:"CNN"})),s.a.createElement(b.Column,null,s.a.createElement(v,{link:"bbc",name:"BBC"})),s.a.createElement(b.Column,null,s.a.createElement(v,{link:"washpost",name:"Washington Post"})),s.a.createElement(b.Column,null,s.a.createElement(v,{link:"espn",name:"ESPN"})),s.a.createElement(b.Column,null,s.a.createElement(v,{link:"engadget",name:"Engadget"})))):s.a.createElement("div",{className:"navBar"},s.a.createElement(v,{link:"usnews",name:"Top US News"}),s.a.createElement(v,{link:"cnn",name:"CNN"}),s.a.createElement(v,{link:"bbc",name:"BBC"}),s.a.createElement(v,{link:"washpost",name:"Washington Post"}),s.a.createElement(v,{link:"espn",name:"ESPN"}),s.a.createElement(v,{link:"engadget",name:"Engadget"}))}}]),t}(a.Component),k=n(97),j={usnews:"country=us",worldnews:"category=general",cnn:"sources=cnn",bbc:"sources=bbc-news",washpost:"sources=the-washington-post",espn:"sources=espn",engadget:"sources=engadget"},N=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(u.a)(this,Object(m.a)(t).call(this,e))).fetchArticles=function(){var e=""!==n.state.exApi?n.state.exApi:n._api;console.log("calling fetchArticles() ".concat((new Date).toTimeString())),k("https://newsapi.org/v2/top-headlines?".concat(j[n.props.match.params.source],"&apiKey=").concat(e)).then(function(e){return e.json()}).then(function(e){return n.parseArticles(e)})},n.parseArticles=function(e){n.setState({status:"",articles:""}),n.setState({status:e.status,total:e.totalResults,articles:e.articles,message:e.message,count:n.state.count+1})},n.changeApi=function(e){n.setState({exApi:e.target.value})},n.changeArticleDb=function(e){n.setState({artDb:e.target.value})},n.postToDatabase=function(e){if(""===n.state.artDb)window.alert("DB URL empty.");else{var t=n.state.articles[e.target.value],a={sourceName:t.source.name,title:t.title,description:t.description,publishedAt:t.publishedAt,url:t.url,urlToImage:t.urlToImage};k(n.state.artDb,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}).then(function(e){return{status:e.status,json:e.json()}}).then(function(e){201===e.status?(window.alert("Successfully posted article."),console.log(e.json)):500===e.status&&(window.alert("Error occurred while posting article. Check log for details."),console.log(e.json))}).catch(function(e){return window.alert("Error connecting to API. Please ensure REST server is running.",e)})}},n.state={articlesJson:[],articles:[],total:"",status:"",message:"",time:void 0,exApi:"",artDb:"http://localhost:3001/articles",source:"",count:0},n._api="81fe8bbe33f64b949474bf94cd180dab",n}return Object(p.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.fetchArticles()}},{key:"componentDidUpdate",value:function(){this.props.match.params.source!==this.state.source&&(this.setState({source:this.props.match.params.source}),this.fetchArticles())}},{key:"render",value:function(){var e=this,t="ok"===this.state.status?this.state.articles.map(function(t,n){return s.a.createElement("div",{key:"article_"+n,className:"article"},s.a.createElement("div",{className:"artTitle"},s.a.createElement("a",{href:t.url,target:"_blank",rel:"noopener noreferrer"},t.title)),t.urlToImage?s.a.createElement("div",null,s.a.createElement("img",{src:t.urlToImage,className:"artImage",alt:""})):null,s.a.createElement("div",{className:"artDesc"},t.source.name,t.description?" - ":null,t.description),s.a.createElement("div",{className:"artDate"},"Published: ",new Date(t.publishedAt).toLocaleString()),s.a.createElement("div",null,s.a.createElement("button",{value:n,onClick:e.postToDatabase},"Save")))}):null;return s.a.createElement("div",{className:"content"},s.a.createElement("div",null,s.a.createElement("h4",null,"News Feed (using NewsAPI)")),s.a.createElement("div",{style:{fontSize:"90%"}},s.a.createElement("form",null,"News API Key: ",s.a.createElement("input",{type:"text",value:this.state.exApi,onChange:this.changeApi}),s.a.createElement("br",null),"DB URL: ",s.a.createElement("input",{type:"text",value:this.state.artDb,onChange:this.changeArticleDb})),s.a.createElement("div",null,"Articles from ",this.props.match.params.source,". API status: ",this.state.status,". Fetch count: ",this.state.count),s.a.createElement("div",null,this.state.message?"Message: "+this.state.message:null)),t)}}]),t}(a.Component),y=(n(162),function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return f.isMobile.isMobile()?s.a.createElement("div",{className:"App"},s.a.createElement(w,null),s.a.createElement(h.a,null,s.a.createElement(d.a,{exact:!0,path:"/",render:function(){return s.a.createElement(E.a,{to:"/usnews"})}}),s.a.createElement(d.a,{path:"/:source",component:N}))):s.a.createElement("div",{className:"App"},s.a.createElement(b.Row,null,s.a.createElement(b.Column,null,s.a.createElement(w,null)),s.a.createElement(b.Column,null,s.a.createElement(h.a,null,s.a.createElement(d.a,{exact:!0,path:"/",render:function(){return s.a.createElement(E.a,{to:"/usnews"})}}),s.a.createElement(d.a,{path:"/:source",component:N})))))}}]),t}(a.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(s.a.createElement(c.a,null,s.a.createElement(y,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},72:function(e,t,n){e.exports=n(165)},77:function(e,t,n){}},[[72,2,1]]]);
//# sourceMappingURL=main.096296f7.chunk.js.map