(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{30:function(e,t,a){e.exports=a(58)},35:function(e,t,a){},55:function(e,t,a){},58:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),l=a(29),r=a.n(l),c=a(60),o=(a(35),a(8)),i=a(9),u=a(11),m=a(10),p=a(12),h=a(63),d=a(62),E=a(61),b=a(5),g=a(16),f=a(59),w=function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{onClick:function(){return window.scrollTo({top:0,behavior:"smooth"})}},s.a.createElement(f.a,{to:this.props.link},s.a.createElement("div",{className:"selector"},this.props.name)))}}]),t}(n.Component),v=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={mobile:!1},a}return Object(p.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.setState({mobile:g.isMobile.isMobile()})}},{key:"render",value:function(){return this.state.mobile?s.a.createElement("div",{className:"navBarMob"},s.a.createElement(b.Row,null,s.a.createElement(b.Column,null,s.a.createElement(w,{link:"usnews",name:"Top US News"})),s.a.createElement(b.Column,null,s.a.createElement(w,{link:"cnn",name:"CNN"})),s.a.createElement(b.Column,null,s.a.createElement(w,{link:"bbc",name:"BBC"})),s.a.createElement(b.Column,null,s.a.createElement(w,{link:"washpost",name:"Washington Post"})),s.a.createElement(b.Column,null,s.a.createElement(w,{link:"espn",name:"ESPN"})),s.a.createElement(b.Column,null,s.a.createElement(w,{link:"engadget",name:"Engadget"})))):s.a.createElement("div",{className:"navBar"},s.a.createElement(w,{link:"usnews",name:"Top US News"}),s.a.createElement(w,{link:"cnn",name:"CNN"}),s.a.createElement(w,{link:"bbc",name:"BBC"}),s.a.createElement(w,{link:"washpost",name:"Washington Post"}),s.a.createElement(w,{link:"espn",name:"ESPN"}),s.a.createElement(w,{link:"engadget",name:"Engadget"}))}}]),t}(n.Component),k={usnews:"country=us",worldnews:"category=general",cnn:"sources=cnn",bbc:"sources=bbc-news",washpost:"sources=the-washington-post",espn:"sources=espn",engadget:"sources=engadget"},j=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).fetchArticles=function(){var e=""!==a.state.exApi?a.state.exApi:a._api;console.log("calling fetchArticles() ".concat((new Date).toTimeString())),window.fetch("https://newsapi.org/v2/top-headlines?".concat(k[a.props.match.params.source],"&apiKey=").concat(e)).then(function(e){return e.json()}).then(function(e){return a.parseArticles(e)})},a.parseArticles=function(e){a.setState({status:"",articles:""}),a.setState({status:e.status,total:e.totalResults,articles:e.articles,message:e.message,count:a.state.count+1})},a.changeApi=function(e){a.setState({exApi:e.target.value})},a.changeArticleDb=function(e){a.setState({artDb:e.target.value})},a.postToDatabase=function(e){if(""===a.state.artDb)window.alert("DB URL empty.");else{var t=a.state.articles[e.target.value],n={sourceName:t.source.name,title:t.title,description:t.description,publishedAt:t.publishedAt,url:t.url,urlToImage:t.urlToImage};window.fetch(a.state.artDb,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}).then(function(e){return{status:e.status,json:e.json()}}).then(function(e){201===e.status?(window.alert("Successfully posted article."),console.log(e.json)):500===e.status&&(window.alert("Error occurred while posting article. Check log for details."),console.log(e.json))}).catch(function(e){return window.alert("Error connecting to API. Please ensure REST server is running.",e)})}},a.state={articlesJson:[],articles:[],total:"",status:"",message:"",time:void 0,exApi:"",artDb:"http://localhost:3001/articles",source:"",count:0},a._api="81fe8bbe33f64b949474bf94cd180dab",a}return Object(p.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.fetchArticles()}},{key:"componentDidUpdate",value:function(){this.props.match.params.source!==this.state.source&&(this.setState({source:this.props.match.params.source}),this.fetchArticles())}},{key:"render",value:function(){var e=this,t="ok"===this.state.status?this.state.articles.map(function(t,a){return s.a.createElement("div",{key:"article_"+a,className:"article"},s.a.createElement("div",{className:"artTitle"},s.a.createElement("a",{href:t.url,target:"_blank",rel:"noopener noreferrer"},t.title)),t.urlToImage?s.a.createElement("div",null,s.a.createElement("img",{src:t.urlToImage,className:"artImage",alt:""})):null,s.a.createElement("div",{className:"artDesc"},t.source.name,t.description?" - ":null,t.description),s.a.createElement("div",{className:"artDate"},"Published: ",new Date(t.publishedAt).toLocaleString()),s.a.createElement("div",null,s.a.createElement("button",{value:a,onClick:e.postToDatabase},"Save")))}):null;return s.a.createElement("div",{className:"content"},s.a.createElement("div",null,s.a.createElement("h4",null,"News Feed (using NewsAPI)")),s.a.createElement("div",{style:{fontSize:"90%"}},s.a.createElement("form",null,"News API Key: ",s.a.createElement("input",{type:"text",value:this.state.exApi,onChange:this.changeApi}),s.a.createElement("br",null),"DB URL: ",s.a.createElement("input",{type:"text",value:this.state.artDb,onChange:this.changeArticleDb})),s.a.createElement("div",null,"Articles from ",this.props.match.params.source,". API status: ",this.state.status,". Fetch count: ",this.state.count),s.a.createElement("div",null,this.state.message?"Message: "+this.state.message:null)),t)}}]),t}(n.Component),A=(a(55),function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return g.isMobile.isMobile()?s.a.createElement("div",{className:"App"},s.a.createElement(v,null),s.a.createElement(h.a,null,s.a.createElement(d.a,{exact:!0,path:"/",render:function(){return s.a.createElement(E.a,{to:"/usnews"})}}),s.a.createElement(d.a,{path:"/:source",component:j}))):s.a.createElement("div",{className:"App"},s.a.createElement(b.Row,null,s.a.createElement(b.Column,null,s.a.createElement(v,null)),s.a.createElement(b.Column,null,s.a.createElement(h.a,null,s.a.createElement(d.a,{exact:!0,path:"/",render:function(){return s.a.createElement(E.a,{to:"/usnews"})}}),s.a.createElement(d.a,{path:"/:source",component:j})))))}}]),t}(n.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(s.a.createElement(c.a,null,s.a.createElement(A,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[30,2,1]]]);
//# sourceMappingURL=main.31aa464f.chunk.js.map